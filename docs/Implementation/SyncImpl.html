<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-docs/Implementation/SyncImpl">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.0">
<title data-rh="true">Sync implementation | WatermelonDB</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://watermelondb.dev/img/watermelon-social-card.png"><meta data-rh="true" name="twitter:image" content="https://watermelondb.dev/img/watermelon-social-card.png"><meta data-rh="true" property="og:url" content="https://watermelondb.dev/docs/Implementation/SyncImpl"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Sync implementation | WatermelonDB"><meta data-rh="true" name="description" content="If you&#x27;re looking for a guide to implement Watermelon Sync in your app, see Synchronization."><meta data-rh="true" property="og:description" content="If you&#x27;re looking for a guide to implement Watermelon Sync in your app, see Synchronization."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://watermelondb.dev/docs/Implementation/SyncImpl"><link data-rh="true" rel="alternate" href="https://watermelondb.dev/docs/Implementation/SyncImpl" hreflang="en"><link data-rh="true" rel="alternate" href="https://watermelondb.dev/docs/Implementation/SyncImpl" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="WatermelonDB RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="WatermelonDB Atom Feed"><link rel="stylesheet" href="/assets/css/styles.170b7886.css">
<link rel="preload" href="/assets/js/runtime~main.5cf994b3.js" as="script">
<link rel="preload" href="/assets/js/main.7089e299.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="WatermelonDB Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="WatermelonDB Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">WatermelonDB</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">0.26.0</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/nozbe/WatermelonDB" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs">About</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Installation">Setup</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Relation">Usage</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Sync/Intro">Sync</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Advanced/CreateUpdateTracking">Advanced</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/Implementation/Architecture">Contributing</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Implementation/Architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Implementation/DatabaseAdapters">Database Adapters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Implementation/Publishing">Publishing WatermelonDB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Implementation/SyncImpl">Sync implementation</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Roadmap">Other</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Contributing</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Sync implementation</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 0.26.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Sync implementation details</h1><p>If you&#x27;re looking for a guide to implement Watermelon Sync in your app, see <a href="/docs/Sync/Intro"><strong>Synchronization</strong></a>.</p><p>If you want to contribute to Watermelon Sync, or implement your own synchronization engine from scratch, read this.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="implementing-your-own-sync-from-scratch">Implementing your own sync from scratch<a href="#implementing-your-own-sync-from-scratch" class="hash-link" aria-label="Direct link to Implementing your own sync from scratch" title="Direct link to Implementing your own sync from scratch">â€‹</a></h2><p>For basic details about how changes tracking works, see: <a href="https://www.youtube.com/watch?v=uFvHURTRLxQ" target="_blank" rel="noopener noreferrer">ðŸ“º Digging deeper into WatermelonDB</a></p><p>Why you might want to implement a custom sync engine? If you have an existing remote server architecture that&#x27;s difficult to adapt to Watermelon sync protocol, or you specifically want a different architecture (e.g. single HTTP request -- server resolves conflicts). Be warned, however, that <strong>implementing sync that works reliably</strong> is a hard problem, so we recommend sticking to Watermelon Sync and tweaking it as needed.</p><p>The rest of this document contains details about how Watermelon Sync works - you can use that as a blueprint for your own work.</p><p>If possible, please use sync implementation helpers from <code>sync/*.js</code> to keep your custom sync implementation have as much commonality as possible with the standard implementation. This is good both for you and for the rest of WatermelonDB community, as we get to share improvements and bug fixes. If the helpers are <em>almost</em> what you need, but not quite, please send pull requests with improvements!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="watermelon-sync----details">Watermelon Sync -- Details<a href="#watermelon-sync----details" class="hash-link" aria-label="Direct link to Watermelon Sync -- Details" title="Direct link to Watermelon Sync -- Details">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="general-design">General design<a href="#general-design" class="hash-link" aria-label="Direct link to General design" title="Direct link to General design">â€‹</a></h3><ul><li>master/replica - server is the source of truth, client has a full copy and syncs back to server (no peer-to-peer syncs)</li><li>two phase sync: first pull remote changes to local app, then push local changes to server</li><li>client resolves conflicts</li><li>content-based, not time-based conflict resolution</li><li>conflicts are resolved using per-column client-wins strategy: in conflict, server version is taken
except for any column that was changed locally since last sync.</li><li>local app tracks its changes using a _status (synced/created/updated/deleted) field and _changes
field (which specifies columns changed since last sync)</li><li>server only tracks timestamps (or version numbers) of every record, not specific changes</li><li>sync is performed for the entire database at once, not per-collection</li><li>eventual consistency (client and server are consistent at the moment of successful pull if no
local changes need to be pushed)</li><li>non-blocking: local database writes (but not reads) are only momentarily locked when writing data
but user can safely make new changes throughout the process</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sync-procedure">Sync procedure<a href="#sync-procedure" class="hash-link" aria-label="Direct link to Sync procedure" title="Direct link to Sync procedure">â€‹</a></h3><ol><li>Pull phase</li></ol><ul><li>get <code>lastPulledAt</code> timestamp locally (null if first sync)</li><li>call <code>pullChanges</code> function, passing <code>lastPulledAt</code><ul><li>server responds with all changes (create/update/delete) that occured since <code>lastPulledAt</code></li><li>server serves us with its current timestamp</li></ul></li><li>IN ACTION (lock local writes):<ul><li>ensure no concurrent syncs</li><li>apply remote changes locally<ul><li>insert new records<ul><li>if already exists (error), update</li><li>if locally marked as deleted (error), un-delete and update</li></ul></li><li>update records<ul><li>if synced, just replace contents with server version</li><li>if locally updated, we have a conflict!<ul><li>take remote version, apply local fields that have been changed locally since last sync
(per-column client wins strategy)</li><li>record stays marked as updated, because local changes still need to be pushed</li></ul></li><li>if locally marked as deleted, ignore (deletion will be pushed later)</li><li>if doesn&#x27;t exist locally (error), create</li></ul></li><li>destroy records<ul><li>if alredy deleted, ignore</li><li>if locally changed, destroy anyway</li><li>ignore children (server ought to schedule children to be destroyed)</li></ul></li></ul></li><li>if successful, save server&#x27;s timestamp as new <code>lastPulledAt</code></li></ul></li></ul><ol start="2"><li>Push phase</li></ol><ul><li>Fetch local changes<ul><li>Find all locally changed records (created/updated record + deleted IDs) for all collections</li><li>Strip _status, _changed</li></ul></li><li>Call <code>pushChanges</code> function, passing local changes object, and the new <code>lastPulledAt</code> timestamp<ul><li>Server applies local changes to database, and sends OK</li><li>If one of the pushed records has changed <em>on the server</em> since <code>lastPulledAt</code>, push is aborted,
all changes reverted, and server responds with an error</li></ul></li><li>IN ACTION (lock local writes):<ul><li>markLocalChangesAsSynced:<ul><li>take local changes fetched in previous step, and:</li><li>permanently destroy records marked as deleted</li><li>mark created/updated records as synced and reset their _changed field</li><li>note: <em>do not</em> mark record as synced if it changed locally since <code>fetch local changes</code> step
(user could have made new changes that need syncing)</li></ul></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="notes">Notes<a href="#notes" class="hash-link" aria-label="Direct link to Notes" title="Direct link to Notes">â€‹</a></h3><ul><li>This procedure is designed such that if sync fails at any moment, and even leaves local app in
inconsistent (not fully synced) state, we should still achieve consistency with the next sync:<ul><li>applyRemoteChanges is designed such that if all changes are applied, but <code>lastPulledAt</code> doesn&#x27;t get
saved â€” so during next pull server will serve us the same changes, second applyRemoteChanges will
arrive at the same result</li><li>local changes before &quot;fetch local changes&quot; step don&#x27;t matter at all - user can do anything</li><li>local changes between &quot;fetch local changes&quot; and &quot;mark local changes as synced&quot; will be ignored
(won&#x27;t be marked as synced) - will be pushed during next sync</li><li>if changes don&#x27;t get marked as synced, and are pushed again, server should apply them the same way</li><li>remote changes between pull and push phase will be locally ignored (will be pulled next sync)
unless there&#x27;s a per-record conflict (then push fails, but next sync resolves both pull and push)</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="migration-syncs">Migration Syncs<a href="#migration-syncs" class="hash-link" aria-label="Direct link to Migration Syncs" title="Direct link to Migration Syncs">â€‹</a></h3><p>Schema versioning and migrations complicate sync, because a client might not be able to sync some tables and columns, but after upgrade to the newest version, it should be able to get consistent sync. To be able
to do that, we need to know what&#x27;s the schema version at which the last sync occured. Unfortunately,
Watermelon Sync didn&#x27;t track that from the first version, so backwards-compat is required.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">synchronize({ migrationsEnabledAtVersion: XXX })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">. . . .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LPA = last pulled at</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MEA = migrationsEnabledAtVersion, schema version at which future migration support was introduced</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LS = last synced schema version (may be null due to backwards compat)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CV = current schema version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LPA     MEA     LS      CV      migration   set LS=CV?   comment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">null    X       X       10      null        YES          first sync. regardless of whether the app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                         is migration sync aware, we can note LS=CV</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                         to fetch all migrations once available</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">100     null    X       X       null        NO           indicates app is not migration sync aware so</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                         we&#x27;re not setting LS to allow future migration sync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">100     X       10      10      null        NO           up to date, no migration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">100     9       9       10      {9-10}      YES          correct migration sync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">100     9       null    10      {9-10}      YES          fallback migration. might not contain all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                         necessary migrations, since we can&#x27;t know for sure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                         that user logged in at then-current-version==MEA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">100     9       11      10      ERROR       NO           LS &gt; CV indicates programmer error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">100     11      X       10      ERROR       NO           MEA &gt; CV indicates programmer error</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">â€‹</a></h3><p>This design has been informed by:</p><ul><li>10 years of experience building synchronization at Nozbe</li><li>Kinto &amp; Kinto.js<ul><li><a href="https://github.com/Kinto/kinto.js/blob/master/src/collection.js" target="_blank" rel="noopener noreferrer">https://github.com/Kinto/kinto.js/blob/master/src/collection.js</a></li><li><a href="https://kintojs.readthedocs.io/en/latest/api/#fetching-and-publishing-changes" target="_blank" rel="noopener noreferrer">https://kintojs.readthedocs.io/en/latest/api/#fetching-and-publishing-changes</a></li></ul></li><li>Histo - <a href="https://github.com/mirkokiefer/syncing-thesis" target="_blank" rel="noopener noreferrer">https://github.com/mirkokiefer/syncing-thesis</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/nozbe/WatermelonDB/edit/master/docs-website/docs/docs/Implementation/SyncImpl.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Implementation/Publishing"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Publishing WatermelonDB</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Roadmap"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Roadmap</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#implementing-your-own-sync-from-scratch" class="table-of-contents__link toc-highlight">Implementing your own sync from scratch</a></li><li><a href="#watermelon-sync----details" class="table-of-contents__link toc-highlight">Watermelon Sync -- Details</a><ul><li><a href="#general-design" class="table-of-contents__link toc-highlight">General design</a></li><li><a href="#sync-procedure" class="table-of-contents__link toc-highlight">Sync procedure</a></li><li><a href="#notes" class="table-of-contents__link toc-highlight">Notes</a></li><li><a href="#migration-syncs" class="table-of-contents__link toc-highlight">Migration Syncs</a></li><li><a href="#reference" class="table-of-contents__link toc-highlight">Reference</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/Installation">Installation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/CONTRIBUTING">Contributing</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/watermelondb" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/radexp" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/nozbe/WatermelonDB" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">WatermelonDB by <a href="https://radex.io">Radek Pietruszewski</a> and <a href="https://nozbe.com">Nozbe</a>.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.5cf994b3.js"></script>
<script src="/assets/js/main.7089e299.js"></script>
</body>
</html>